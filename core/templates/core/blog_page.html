{% extends 'base.html' %}
{% load static %}
{% load custom_tags %}
{% block content %}



<!-- start first section -->
<section class="first_section blog_page social-triangle" id="home"
    {% if blog.banner_image %}
        style="background-image: url('{{ blog.banner_image.url }}'); background-size: cover; background-position: center;"
    {% else %}
        style="background-image: url('{% static "images/default-banner.jpg" %}'); background-size: cover; background-position: center;"
    {% endif %}>

    <div class="parallax-overlay"></div>
    <div class="container">
        <div class="banner_content col-12 col-lg-11 col-md-12" data-aos="zoom-in" data-aos-duration="1000">
            <h1 class="main_tiltle m-0">{{ blog.title }}</h1>
            <p>{{ blog.intro_text }}</p>
            <a class="button fitzaro_btn" href="#about">Read More</a>
        </div>
        <a href="#about" class="scroll-down">
            <span class="scroll-arrow arrow1"></span>
            <span class="scroll-arrow arrow2"></span>
            <span class="scroll-arrow arrow3"></span>
        </a>
    </div>
    <div class="slide_social_ic" data-aos="fade-up-left" data-aos-duration="1000">
        <div class="triangle-1"></div>
        <div class="banner_social">
            <a href="https://www.facebook.com/" target="_blank">FB</a>
            <a href="https://www.instagram.com/" target="_blank">IG</a>
            <a href="https://www.youtube.com/" target="_blank">YT</a>
        </div>
    </div>
</section>

<!-- end first section -->



<!-- start blog-post detail section -->
<section class="about-section post_detail p-10" id="about">
    <h2 class="d-none">Hidden</h2>
    <div class="container">
        <div class="row align-items-center">
            <!-- IMAGE -->
            <div class="col-12 col-lg-6 col-md-6 video_wrap" data-aos="fade-right" data-aos-duration="1000">
                <div class="bg_image">
                    <!-- ... arrows, border lines as per your existing code ... -->
                    <img src="{{ blog.main_image.url }}" alt="{{ blog.title }}" class="video-img img-fluid">
                </div>
            </div>

            <!-- TEXT -->
            <div class="col-12 col-lg-6 col-md-6">
                <div class="video_info">
                    <div class="post_view d-flex gap-3 align-items-center user-select-none" style="font-weight: 500;">
                        <div class="view-person d-flex align-items-center">
                            <i class="ri-eye-line me-1"></i>
                            <span>{{ blog.views }}</span>
                        </div>
                        <div class="post_date d-flex align-items-center">
                            <i class="ri-calendar-2-line me-1"></i>
                            <span>{{ blog.created_at|date:"F d, Y" }}</span>
                        </div>
                    </div>
                    <p class="m-0 post_content mt-3" style="color: #000000;">{{ blog.content_section|linebreaksbr }}</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- end blog-post detail section -->

<!-- start quote + checklist + gallery -->
<section class="sub-post-data">
    <div class="container">

        {% if blog.quote or blog.sub_content %}
        <div class="text-center my-5" data-aos="fade-down" data-aos-easing="linear" data-aos-duration="1000">
            {% if blog.quote %}
            <h2 class="fw-bold mb-3">
                {{ blog.quote }}
            </h2>
            {% endif %}

            {% if blog.sub_content %}
            <p class="weight-formula mx-auto text-muted" style="max-width: 900px;">
                {{ blog.sub_content|linebreaks }}
            </p>
            {% endif %}
        </div>
        {% endif %}

        {% if checklist_left or checklist_right %}
        <div class="check_points row justify-content-center text-center mt-4 gx-5 gy-3">
            <div class="col-12 col-md-6 col-lg-5">
                <div class="box_detail">
                    {% for point in checklist_left %}
                    <div class="list_icon d-flex align-items-start mb-2">
                        <i class="ri-check-line text-danger me-2 mt-1"></i>
                        <p class="m-0 check_detail text-start ">{{ point }}</p>
                    </div>
                    {% endfor %}
                </div>
            </div>
            <div class="col-12 col-md-6 col-lg-5">
                <div class="box_detail">
                    {% for point in checklist_right %}
                    <div class="list_icon d-flex align-items-start mb-2">
                        <i class="ri-check-line text-danger me-2 mt-1"></i>
                        <p class="m-0 check_detail text-start ">{{ point }}</p>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
        {% endif %}


        {% if blog.gallery_image1 or blog.gallery_image2 or blog.gallery_image3 %}
        <div class="row fizaro_blog_images mt-4" data-aos="zoom-in-up" data-aos-easing="linear"
            data-aos-duration="1000">
            {% if blog.gallery_image1 %}
            <div class="col-12 col-md-4 col-lg-4">
                <img src="{{ blog.gallery_image1.url }}" alt="gallery1" class="img-fluid rounded">
            </div>
            {% endif %}
            {% if blog.gallery_image2 %}
            <div class="col-12 col-md-4 col-lg-4">
                <img src="{{ blog.gallery_image2.url }}" alt="gallery2" class="img-fluid rounded">
            </div>
            {% endif %}
            {% if blog.gallery_image3 %}
            <div class="col-12 col-md-4 col-lg-4">
                <img src="{{ blog.gallery_image3.url }}" alt="gallery3" class="img-fluid rounded">
            </div>
            {% endif %}
        </div>
        {% endif %}
    </div>
</section>
<!-- end blog-post detail section -->

<!-- start related-blog section -->
<section class="fitzaro_blog p-10" id="news">
    <div class="shape-img-1 animate-this">
        <img src="{% static 'images/svg/shape-post1.svg' %}" alt="shape-post1" class="img-fluid">
    </div>
    <div class="shape-img-2 animate-this">
        <img src="{% static 'images/svg/shape-post2.svg' %}" alt="shape-post2" class="img-fluid">
    </div>
    <div class="shape-img-3 animate-this">
        <img src="{% static 'images/svg/shape-post3.svg' %}" alt="shape-post3" class="img-fluid">
    </div>
    <div class="container">
        <div class="blog_details text-center mb-60">
            <span class="sub_heading">Our News</span>
            <h2 class="m-0">Latest Blog Posts</h2>
        </div>
        <div class="blog_slider" data-aos="zoom-in" data-aos-easing="linear" data-aos-duration="1000">
            <div class="swiper-wrapper">
                {% for blog in blogs %}
                <div class="blog_post swiper-slide">
                    <div class="blog-image">
                        <a href="{% url 'blog_detail' slug=blog.slug %}">
                            <img src="{{ blog.main_image.url }}" alt="{{ blog.title }}" class="img-fluid">
                        </a>
                    </div>
                    <div class="post_data">
                        <ul class="feature-post">
                            <li>
                                <i class="ri-eye-line"></i>
                                <span>{{ blog.views }}</span>
                            </li>
                            <li class="m-0">
                                <i class="ri-calendar-2-line"></i>
                                <span>{{ blog.created_at|date:"F d, Y" }}</span>
                            </li>
                        </ul>
                        <a href="{% url 'blog_detail' slug=blog.slug %}">
                            <h3 class="blog_title">{{ blog.title }}</h3>
                        </a>
                        <div class="read-button moving-left">
                            <a href="{% url 'blog_detail' slug=blog.slug %}" class="read-more-btn">Read More</a>
                            <svg width="35" height="16" viewBox="0 0 35 16" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <path fill-rule="evenodd" clip-rule="evenodd"
                                    d="M27.5321 0.318191L34.4457 7.23182C34.87 7.65607 34.87 8.34393 34.4457 8.76818L27.5321 15.6818C27.1078 16.1061 26.42 16.1061 25.9957 15.6818C25.5715 15.2576 25.5715 14.5697 25.9957 14.1454L31.0548 9.08637H1.08637C0.486385 9.08637 0 8.59999 0 8C0 7.40001 0.486385 6.91363 1.08637 6.91363H31.0548L25.9957 1.85455C25.5715 1.4303 25.5715 0.742446 25.9957 0.318191C26.42 -0.106064 27.1078 -0.106064 27.5321 0.318191Z"
                                    fill="#EA1C29"></path>
                            </svg>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
</section>
<!-- end related-blog section -->

<!-- start comment-review section -->
<section class="blog_comment-area" data-aos="fade-up" data-aos-easing="linear" data-aos-duration="1000">
  <div class="container">
    <h2>Comments [{{ comments.count }}]</h2>
    <div class="comment-list">

      {% for comment in comments %}
      <div class="comment d-flex mb-4">
        <div class="thumbnail me-3">
          <img width="100" height="100"
               src="{% static 'images/images/comment/default-avatar.png' %}"
               alt="User Avatar"
               class="rounded-circle shadow-sm">
        </div>
        <div class="comment-content">
          <div class="title fw-bold fs-5">{{ comment.name }}</div>
          <div class="comment-date d-flex align-items-center gap-2 mb-2">
            <span class="text-danger fw-bold small">
              {{ comment.created_at|date:"F d, Y @ h:i A" }}
            </span>
            <button class="reply-btn border-0 bg-transparent text-danger d-flex align-items-center">
              <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                  d="M8.25 15L0.75 9L8.25 3V6.75C12.3923 6.75 15.75 10.1077 15.75 14.25C15.75 14.4548 15.7425 14.6572 15.726 14.8575C14.595 12.7125 12.3435 11.25 9.75 11.25H8.25V15Z"
                  fill="#EA1C29" />
              </svg>
              <span class="ms-1">Reply</span>
            </button>
          </div>
          <p class="m-0">{{ comment.comment }}</p>
        </div>
      </div>
      {% empty %}
      <p class="text-center text-muted">No comments yet. Be the first to share your thoughts!</p>
      {% endfor %}

    </div>
  </div>
</section>
<!-- end comment-review section -->

<!-- start comment form -->
<section class="comment-form p-10">
  <div class="container contact-form" data-aos="fade-right" data-aos-easing="linear" data-aos-duration="1000">
    <h2 class="mb-4">Leave A Reply</h2>

    {% if messages %}
      {% for message in messages %}
        <div class="alert alert-warning alert-dismissible fade show" role="alert">
          {{ message }}
          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
      {% endfor %}
    {% endif %}

    {% if user.is_authenticated %}
      <form method="post" class="leave-comment row">
        {% csrf_token %}
        {{ form.non_field_errors }}

        <!-- Comment Field -->
        <div class="col-12">
          <div class="comment-icon d-flex align-items-start">
            <i class="ri-edit-line text-danger me-2 mt-1"></i>
            {{ form.comment }}
          </div>
        </div>

        <div class="col-12 comment-btn mt-4">
          <button type="submit" class="button fitzaro_btn">Post Comment</button>
        </div>
      </form>
    {% else %}
      <div class="alert alert-info mt-3">
        ⚠️ You must <strong><a href="#">log in</a></strong> to post a comment.
      </div>
    {% endif %}
  </div>
</section>
<!-- end comment form -->

{% endblock %}